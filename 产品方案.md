# PRD: AI 驱动的每日行业情报聚合服务 (Daily RSS AI Digest)

| 文档属性 | 内容 |
| :--- | :--- |
| **版本号** | v1.0.0 |
| **状态** | 🟢 草稿 (Draft) |
| **最后更新** | 2026-01-21 |
| **部署环境** | Vercel (Serverless) |

---

## 1. 项目背景与目标 (Background & Objectives)

### 1.1 背景
当前行业信息极度碎片化，通过手动阅读 RSS 源耗时且效率低下。我们需要一个自动化的“情报官”，能够每天定时抓取指定的高质量信息源，通过 AI 进行深度阅读、去噪、分类和总结，最终生成一份详尽的（约 8000 字）研报级文档，推送到指定终端。

### 1.2 核心目标
1.  **自动化采集**：实现工作日（周一至周五）的全自动触发与抓取。
2.  **AI 深度加工**：利用 LLM 的 Context 理解能力，将碎片化信息转化为结构化的长文报告。
3.  **高可用架构**：基于 Vercel 部署，解决 Serverless 环境下长时任务（Long-running tasks）的执行问题。

---

## 2. 产品范围 (Scope)

### 2.1 核心流程 (User Flow)
1.  **Trigger**: 系统在工作日早晨自动唤醒。
2.  **Fetch**: 并行抓取配置列表中的 RSS XML 数据。
3.  **Filter**: 基于时间戳过滤掉旧闻（只保留 24 小时内）。
4.  **Agent Process (Map)**: 对单条新闻进行摘要、打标签、评分。
5.  **Agent Process (Reduce)**: 聚合所有高分信息，按分类撰写深度长文。
6.  **Delivery**: 将最终的 Markdown 内容 POST 给下游 Webhook。

### 2.2 边界条件 (Constraints)
* **频率**：仅周一至周五运行，周末休眠。
* **字数**：目标输出约为 8000 字（视当日信息源的数量和质量动态调整）。
* **时效性**：抓取任务需在 10 分钟内完成，由于 Vercel Serverless Function 的限制，需采用异步编排。

---

## 3. 功能需求 (Functional Requirements)

### 3.1 调度与采集模块
| ID | 功能点 | 描述 | 优先级 |
| :--- | :--- | :--- | :--- |
| **F-01** | 定时触发器 | 配置 Vercel Cron Jobs，设定 Cron 表达式为 `0 9 * * 1-5` (早9点，周一至周五)。 | P0 |
| **F-02** | RSS 解析器 | 支持标准 RSS 2.0 及 Atom 格式；具备 User-Agent 伪装能力以防反爬。 | P0 |
| **F-03** | 增量去重 | (可选) 引入轻量级 KV 数据库 (Redis)，记录已处理 URL，防止重复报告。 | P1 |

### 3.2 AI 处理模块 (Agent Core)
该模块采用 **Map-Reduce** 架构来处理大量 Token 并生成长文。

* **Step 1: 分析员 Agent (The Analyst)**
    * **输入**: 单篇 RSS 文章标题 + 正文/摘要。
    * **动作**:
        1.  **总结**: 提炼核心观点 (300字以内)。
        2.  **分类**: 归入预设类别 (如：AI 模型、SaaS 动态、竞品分析、技术前沿)。
        3.  **评分**: 1-10 分打分，低于 6 分的信息直接丢弃。
    * **输出**: 结构化 JSON 对象。

* **Step 2: 主编 Agent (The Editor)**
    * **输入**: Step 1 产生的所有高分 JSON 集合。
    * **动作**:
        1.  **大纲构建**: 根据分类数量规划文章结构。
        2.  **长文撰写**: 针对每个分类，串联碎片信息，生成连贯的深度分析段落。
        3.  **金字塔结构**: 生成“执行摘要 (TL;DR)”放在文首。
    * **输出**: 完整的 Markdown 字符串 (目标 ~8000 字)。

### 3.3 输出与交付模块
| ID | 功能点 | 描述 | 优先级 |
| :--- | :--- | :--- | :--- |
| **F-04** | Webhook 推送 | 将 Markdown 内容封装在 JSON Body 中发送 POST 请求。 | P0 |
| **F-05** | 错误通知 | 若抓取失败或 AI 生成失败，发送简短报警信息。 | P1 |

### 3.4 配置与管理模块 (New)
| ID | 功能点 | 描述 | 优先级 |
| :--- | :--- | :--- | :--- |
| **F-06** | 动态配置页 | 提供前端界面输入 API Key、Webhook URL 和 RSS 源列表。 | P0 |
| **F-07** | 安全访问控制 | 通过管理员口令保护配置页面，防止配置泄露。 | P0 |
| **F-08** | 连接测试 | 支持一键测试 Webhook 是否能正常接收消息。 | P1 |

---

## 4. 输出内容规范 (Content Spec)

最终生成的 Markdown 文档应遵循以下结构：

```markdown
# [日期] 每日行业情报简报

> **执行摘要 (TL;DR)**
> 这里是 300 字的核心摘要，快速概览今日最重要的 3 件事。

---

## 目录
1. [AI 技术与模型进展](#part1)
2. [移动端产品动态](#part2)
...

## 1. AI 技术与模型进展
(此处由 AI 生成约 2000 字的深度综述，整合了该类别下的多条新闻，包含对比分析)

### 重点资讯详情
* **[新闻标题 1]**: 详细解读...
* **[新闻标题 2]**: 详细解读...

... (重复其他分类)

## 附录：原始链接源
* [标题](URL)