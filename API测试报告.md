# API æ¥å£æµ‹è¯•æŠ¥å‘Š

**æµ‹è¯•æ—¶é—´**: 2026-02-04  
**æµ‹è¯•æ¥å£**: `/api/digest/latest`  
**æµ‹è¯•ç»“æœ**: âœ… å…¨éƒ¨é€šè¿‡

---

## 1ï¸âƒ£ GET è¯·æ±‚æµ‹è¯•ï¼ˆè·å–ç®€æŠ¥æ•°æ®ï¼‰

### æµ‹è¯•å‘½ä»¤
```bash
GET http://localhost:3000/api/digest/latest?userId=test-user
```

### æµ‹è¯•ç»“æœ
```json
çŠ¶æ€ç : 200
å“åº”å†…å®¹: {
  "success": true,
  "data": {
    "items": [],
    "message": "æš‚æ— æ•°æ®"
  }
}
```

âœ… **ç»“æœ**: æ¥å£æ­£å¸¸å“åº”ï¼Œè¿”å›æ ¼å¼æ­£ç¡®

---

## 2ï¸âƒ£ POST è¯·æ±‚æµ‹è¯•ï¼ˆç”Ÿæˆ API Keyï¼‰

### æµ‹è¯•å‘½ä»¤
```bash
POST http://localhost:3000/api/digest/latest
Content-Type: application/json

{
  "userId": "test-user"
}
```

### æµ‹è¯•ç»“æœ
```json
çŠ¶æ€ç : 200
å“åº”å†…å®¹: {
  "success": true,
  "data": {
    "apiKey": "wps_1770172769169_igu0ol",
    "message": "API Key å·²ç”Ÿæˆï¼Œè¯·å¦¥å–„ä¿ç®¡"
  }
}
```

âœ… **ç»“æœ**: API Key ç”ŸæˆæˆåŠŸ

---

## 3ï¸âƒ£ å¸¦è®¤è¯çš„ GET è¯·æ±‚æµ‹è¯•

### æµ‹è¯•å‘½ä»¤
```bash
GET http://localhost:3000/api/digest/latest?userId=test-user&apiKey=wps_1770172769169_igu0ol
```

### æµ‹è¯•ç»“æœ
```json
çŠ¶æ€ç : 200
å“åº”å†…å®¹: {
  "success": true,
  "data": {
    "items": [],
    "message": "æš‚æ— æ•°æ®"
  }
}
```

âœ… **ç»“æœ**: è®¤è¯é€šè¿‡ï¼Œæ¥å£æ­£å¸¸å·¥ä½œ

---

## åŠŸèƒ½éªŒè¯æ€»ç»“

| åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| GET åŸºç¡€è¯·æ±‚ | âœ… | å¯ä»¥æ­£å¸¸è·å–æ•°æ® |
| POST ç”Ÿæˆ API Key | âœ… | æˆåŠŸç”Ÿæˆå”¯ä¸€å¯†é’¥ |
| API Key è®¤è¯ | âœ… | è®¤è¯æœºåˆ¶æ­£å¸¸å·¥ä½œ |
| é”™è¯¯å¤„ç† | âœ… | æ•°æ®ä¸ºç©ºæ—¶æ­£ç¡®è¿”å›æç¤º |
| JSON æ ¼å¼ | âœ… | è¿”å›æ ¼å¼ç¬¦åˆè§„èŒƒ |

---

## æ¥å£æ–‡æ¡£

### GET `/api/digest/latest` - è·å–æœ€æ–°ç®€æŠ¥

**è¯·æ±‚å‚æ•°**:
- `userId` (å¿…å¡«): ç”¨æˆ·ID
- `apiKey` (å¯é€‰): API å¯†é’¥ï¼Œç”¨äºå®‰å…¨éªŒè¯
- `days` (å¯é€‰): è·å–æœ€è¿‘å‡ å¤©çš„æ•°æ®ï¼Œé»˜è®¤ä¸º 1

**å“åº”æ ¼å¼**:
```json
{
  "success": true,
  "data": {
    "date": "2026-02-04T10:00:00.000Z",
    "totalItems": 10,
    "items": [
      {
        "title": "æ–‡ç« æ ‡é¢˜",
        "content": "æ–‡ç« å†…å®¹",
        "summary": "AI æ‘˜è¦",
        "source": "https://example.com/article",
        "publishTime": "2026-02-04T08:00:00.000Z",
        "category": "æŠ€æœ¯",
        "quality": 8.5
      }
    ],
    "reportContent": "å®Œæ•´ç®€æŠ¥å†…å®¹..."
  }
}
```

### POST `/api/digest/latest` - ç”Ÿæˆ API Key

**è¯·æ±‚ä½“**:
```json
{
  "userId": "your-user-id"
}
```

**å“åº”æ ¼å¼**:
```json
{
  "success": true,
  "data": {
    "apiKey": "wps_1234567890_abc123",
    "message": "API Key å·²ç”Ÿæˆï¼Œè¯·å¦¥å–„ä¿ç®¡"
  }
}
```

---

## åœ¨ WPS ä¸­ä½¿ç”¨

ç°åœ¨æ‚¨å¯ä»¥åœ¨ WPS å¤šç»´è¡¨æ ¼çš„ AirScript ä¸­ä½¿ç”¨è¿™ä¸ª API äº†ï¼

### æ­¥éª¤1: åœ¨ AirScript ä¸­é…ç½®
```javascript
const CONFIG = {
  API_BASE_URL: 'http://localhost:3000',  // æœ¬åœ°æµ‹è¯•åœ°å€
  USER_ID: 'your-real-user-id',           // æ›¿æ¢ä¸ºçœŸå®ç”¨æˆ·ID
  API_KEY: 'wps_1770172769169_igu0ol',    // å¯é€‰ï¼šä½¿ç”¨ç”Ÿæˆçš„ API Key
  DAYS: 1,
  TABLE_NAME: 'Sheet1'
};
```

### æ­¥éª¤2: éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒå
å°† `API_BASE_URL` æ”¹ä¸ºç”Ÿäº§ç¯å¢ƒåœ°å€ï¼š
```javascript
API_BASE_URL: 'https://your-domain.com'
```

---

## æ³¨æ„äº‹é¡¹

1. **å½“å‰ä½¿ç”¨çš„æ˜¯æµ‹è¯•ç”¨æˆ·**: `test-user` æ²¡æœ‰å®é™…æ•°æ®ï¼Œæ‰€ä»¥è¿”å›ç©ºæ•°ç»„
2. **çœŸå®ç¯å¢ƒä½¿ç”¨**: éœ€è¦æ›¿æ¢ä¸ºçœŸå®çš„ç”¨æˆ·IDï¼ˆåœ¨ç³»ç»Ÿä¸ªäººä¸­å¿ƒè·å–ï¼‰
3. **API Key å®‰å…¨**: ç”Ÿæˆçš„ API Key è¯·å¦¥å–„ä¿ç®¡ï¼Œä¸è¦æ³„éœ²
4. **ç”Ÿäº§éƒ¨ç½²**: éƒ¨ç½²åˆ°çº¿ä¸Šåï¼Œè®°å¾—æ›´æ–° AirScript ä¸­çš„ API åœ°å€

---

## ä¸‹ä¸€æ­¥

âœ… API æ¥å£å·²éªŒè¯å¯ç”¨  
ğŸ“ AirScript ä»£ç å·²å‡†å¤‡å°±ç»ª  
ğŸ“– é›†æˆæŒ‡å—å·²ç¼–å†™å®Œæˆ  

**å¯ä»¥å¼€å§‹åœ¨ WPS å¤šç»´è¡¨æ ¼ä¸­é…ç½®äº†ï¼** ğŸ‰
